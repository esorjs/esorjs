var S=Object.defineProperty;var H=e=>{throw TypeError(e)};var Y=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i=(e,t)=>S(e,"name",{value:t,configurable:!0});var A=(e,t,n)=>Y(e,typeof t!="symbol"?t+"":t,n),_=(e,t,n)=>t.has(e)||H("Cannot "+n);var M=(e,t,n)=>(_(e,t,"read from private field"),n?n.call(e):t.get(e)),x=(e,t,n)=>t.has(e)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),j=(e,t,n,o)=>(_(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),b=(e,t,n)=>(_(e,t,"access private method"),n);function L(e,t,n="error"){let o=n==="warn"?console.warn:console.error,r=t instanceof Error?t:new Error(String(t));return o(`[Esor Error] ${e}:`,r.message),r}i(L,"handleError");var h=null,O=["beforeMount","mount","beforeUpdate","update","destroy"],U=i(e=>{h=e,e._lifecycles=Object.fromEntries(O.map(t=>[t,[]])),e.runHook=t=>{let n=e._lifecycles?.[t];if(n?.length)for(let o=0;o<n.length;o++)queueMicrotask(()=>n[o].call(e))}},"createLifecycle"),z=i((e,t)=>{if(!h||!h._lifecycles){L("lifecycle",`Hook called outside ctx setup for "${e}"`);return}h._lifecycles[e].push(t)},"addHook"),F={};O.forEach(e=>{let t=e.startsWith("before")?e:`on${e.charAt(0).toUpperCase()+e.slice(1)}`;F[t]=n=>z(e,n)});var{beforeMount:Q,onMount:Z,beforeUpdate:v,onUpdate:ee,onDestroy:te}=F,ne=i(e=>{let t=e();return typeof t=="function"&&z("destroy",t),()=>{}},"onEffect"),oe=i(()=>(h||console.warn("getCurrentContext called outside of component lifecycle"),h),"getCurrentContext");var a=null,C=0,k=[],y=i(e=>{let t=[];return n=>{if(n===void 0)return a&&!t.includes(a)&&(t.push(a),a.deps?.add(t)),e;let o=typeof n=="function"?n(e):n;if(e!==o)if(e=o,C>0)for(let r=0;r<t.length;r++)k.includes(t[r])||k.push(t[r]);else for(let r=0;r<t.length;r++)t[r]();return e}},"signal"),d=i(e=>{let t=new Set,n=i(()=>{G(n,t),a=n,a.deps=t,e(),a=null},"run");return n(),()=>{G(n,t)}},"effect"),G=i((e,t)=>{if(t){for(let n of t){let o=n.indexOf(e);o!==-1&&n.splice(o,1)}t.clear()}},"cleanupDeps"),V=i(e=>{let t=y();return d(()=>t(e())),t},"computed"),W=i(e=>{C++;try{return e()}finally{if(--C,C===0){let t=k.splice(0);for(let n=0;n<t.length;n++)t[n]()}}},"batch");var re=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/;function ie(e){if(e==null)return"";if(e==="true")return!0;if(e==="false")return!1;if(re.test(e))return Number(e);if(typeof e=="string"&&(e[0]==="{"||e[0]==="["))try{return JSON.parse(e)}catch{}return e}i(ie,"parseAttributeValue");function $(e){for(let t of e.attributes){let{name:n,value:o}=t;n.startsWith("on")||n.startsWith("ref")||(e.props[n]=y(ie(o)))}}i($,"initializeProps");function T(e,t,n=null){let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n?.dispatchEvent(o),o}i(T,"emit");function B(e){e&&(e.emit=(t,n)=>T(t,n,e))}i(B,"initDispatch");function p(e,{mark:t=!1,parent:n=null}={}){let o=document.createDocumentFragment();if(!e?.length)return o;for(let r of e)r&&(t&&(r._marker=!0),o.appendChild(Array.isArray(r)?p(r,{mark:t}):r));return n&&o.childNodes.length&&n.appendChild(o),o}i(p,"createFragment");function D(e){return Object.keys(e).reduce((t,n)=>e[n]?t+n+" ":t,"").trim()}i(D,"joinTruthy");var ce=/^[a-z][a-z0-9]*-[a-z0-9-]*$/,se=i((e,t={})=>{var n,o,r,q,w,l;return l=class extends HTMLElement{constructor(){super();x(this,r);x(this,n,this.attachShadow({mode:t.shadowMode||"open"}));x(this,o,!1);A(this,"props",Object.create(null));A(this,"_cleanup",[]);b(this,r,q).call(this),this.runHook("beforeMount")}connectedCallback(){b(this,r,w).call(this,!0)&&this.runHook("mount")}disconnectedCallback(){this._cleanup.forEach(f=>f()),this._cleanup=[],this.runHook("destroy"),b(this,r,w).call(this,!1)}},n=new WeakMap,o=new WeakMap,r=new WeakSet,q=i(function(){U(this),B(this),$(this);let f=e?.call(this,this.props),m=typeof f=="function"?f():f;p(m||[m],{parent:M(this,n)})},"#initializeComponent"),w=i(function(f){return M(this,o)===f?!1:(j(this,o,f),!0)},"#setMounted"),l},"BaseComponent"),fe=i((e,t,n={})=>{typeof customElements<"u"&&ce.test(e)&&!customElements.get(e)&&customElements.define(e,se(t,n))},"component");var R=i(e=>e==null?"":String(e).replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[t]),"sanitizeHtml");function P(e,t){if(!t?.parentNode)return;let n=t.parentNode,o=t._marker||[];if(!e?.length){for(let c of o)c.nodes.forEach(f=>f?.parentNode?.removeChild(f));t._marker=[];return}let r=new Map(o.map(c=>[c.key,c])),s=e.map((c,f)=>(c=Array.isArray(c)?c.filter(Boolean):[c],{key:c.find(J=>J?.getAttribute?.("key"))?.getAttribute("key")||`__index_${f}`,nodes:c})),u=new Map(s.map(c=>[c.key,c]));for(let c of o)u.has(c.key)||c.nodes.forEach(f=>f?.parentNode?.removeChild(f));let l=t;for(let c of s){let f=r.get(c.key);f?(K(f.nodes,c.nodes,n),f.nodes[0]!==l.nextSibling&&n.insertBefore(p(f.nodes),l.nextSibling),c.nodes=f.nodes):n.insertBefore(p(c.nodes,{mark:!0}),l.nextSibling),l=c.nodes[c.nodes.length-1]||l}t._marker=s}i(P,"reconcile");function K(e,t,n){for(let o=0;o<Math.max(e.length,t.length);o++){let r=e[o],s=t[o];!r&&s?n.appendChild(s):r&&!s?(r._cleanup?.(),n.removeChild(r)):r&&s&&(r.nodeType!==s.nodeType||r.tagName!==s.tagName?n.replaceChild(s,r):r.nodeType===3?r.nodeValue!==s.nodeValue&&(r.nodeValue=s.nodeValue):r.nodeType===1&&(le(r,s),K([...r.childNodes],[...s.childNodes],r)))}}i(K,"patchNodes");function le(e,t){let n={},o=new Set;for(let{name:r,value:s}of e.attributes)n[r]=s;for(let{name:r,value:s}of t.attributes)n[r]!==s&&e.setAttribute(r,s),o.add(r);for(let r in n)o.has(r)||e.removeAttribute(r)}i(le,"patchAttributes");var X=new WeakMap,g="\uFEFF",N=i((e,t,n)=>{if(t)if(e.removeAttribute(t),t==="ref")typeof n=="function"?n(e):n&&(n.current=e);else if(t.startsWith("on")&&typeof n=="function"){let o=t.slice(2).toLowerCase();e.addEventListener(o,n),e._cleanup=()=>e.removeEventListener(o,n)}else t==="style"&&typeof n=="object"?d(()=>Object.assign(e.style,n)):d(()=>ue(e,t,typeof n=="function"?n():n));else ae(e,n)},"render");function ue(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null||n===void 0?e.removeAttribute(t):e.setAttribute(t,typeof n=="object"?D(n):n)}i(ue,"setAttribute");function pe(e,t){let n=e.parentNode,o=e.nextSibling;for(;o&&o._marker;)o._cleanup?.(),n.removeChild(o),o=e.nextSibling;t?.length&&de(p(t,{mark:!0}),n,e.nextSibling)}i(pe,"replaceNodes");function ae(e,t){let n=i(o=>{if((o===!0||o===!1)&&(o=""),Array.isArray(o))P(o,e);else{let r=o==null?"":String(o),s=document.createTextNode(R(r));pe(e,[s])}},"updateContent");typeof t=="function"?d(()=>n(t())):n(t)}i(ae,"setContent");function de(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}i(de,"insertFragment");function me(e,t){let n=[],o=document.createTreeWalker(e.content,5);for(;o.nextNode();)n.push(o.currentNode);let r=0;for(let s=0;s<n.length;s++){let u=n[s];if(u.nodeType===1&&u.attributes.length)for(let l of Array.from(u.attributes))l.value===g&&N(u,l.name,t[r++]);else if(u.nodeType===3&&u.nodeValue.includes(g))if(u.nodeValue===g){let l=document.createComment("");u.parentNode.replaceChild(l,u),N(l,null,t[r++])}else{let l=E(u.nodeValue.replaceAll(g,"<!>")),c=Array.from(l.content.childNodes);for(let f=0;f<c.length;f++){let m=c[f];m.nodeType===8&&N(m,null,t[r++])}u.parentNode.replaceChild(l.content,u)}}}i(me,"processTemplate");var E=i((e,t)=>{let n=document.createElement("template");return n.innerHTML=e,t?.as==="nodes"?[...n.content.childNodes]:n},"createNodes"),I=i((e,...t)=>{let n=X.get(e)||(X.set(e,e),e);if(!t.length)return n.length===1?E(n[0],{as:"nodes"}):E(n.join(""),{as:"nodes"});let o=E(n.join(g));return me(o,t),[...o.content.childNodes]},"html");function he(e=null){let t=e;return n=>n!==void 0?t=n:t}i(he,"ref");export{W as batch,Q as beforeMount,v as beforeUpdate,fe as component,V as computed,d as effect,T as emit,oe as getCurrentContext,I as html,te as onDestroy,ne as onEffect,Z as onMount,ee as onUpdate,he as ref,y as signal};
//# sourceMappingURL=esor.min.js.map
