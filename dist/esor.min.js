var N=Object.defineProperty;var j=e=>{throw TypeError(e)};var J=(e,t,n)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i=(e,t)=>N(e,"name",{value:t,configurable:!0});var C=(e,t,n)=>J(e,typeof t!="symbol"?t+"":t,n),_=(e,t,n)=>t.has(e)||j("Cannot "+n);var w=(e,t,n)=>(_(e,t,"read from private field"),n?n.call(e):t.get(e)),b=(e,t,n)=>t.has(e)?j("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),H=(e,t,n,o)=>(_(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),g=(e,t,n)=>(_(e,t,"access private method"),n);function O(e,t,n="error"){let o=n==="warn"?console.warn:console.error,r=t instanceof Error?t:new Error(String(t));return o(`[Esor Error] ${e}:`,r.message),r}i(O,"handleError");var x=null,V=["beforeMount","mount","beforeUpdate","update","destroy"],F=i(e=>{x=e,e._lifecycles=Object.fromEntries(V.map(t=>[t,[]])),e.runHook=t=>{let n=e._lifecycles?.[t];if(n?.length)for(let o=0;o<n.length;o++)queueMicrotask(()=>n[o].call(e))}},"createLifecycle"),L=i((e,t)=>{if(!x||!x._lifecycles){O("lifecycle",`Hook called outside ctx setup for "${e}"`);return}x._lifecycles[e].push(t)},"addHook"),z={};V.forEach(e=>{let t=e.startsWith("before")?e:`on${e.charAt(0).toUpperCase()+e.slice(1)}`;z[t]=n=>L(e,n)});var{beforeMount:Q,onMount:Y,beforeUpdate:Z,onUpdate:v,onDestroy:ee}=z,te=i(e=>{let t=e();return typeof t=="function"&&L("destroy",t),()=>{}},"onEffect");var a=null,E=0,M=new Set,h=i(e=>{let t=e,n=[],o=i(r=>{if(r===void 0)return a&&!n.includes(a)&&(n.push(a),a.subs&&a.subs.add(o)),t;let s=typeof r=="function"?r(t):r;if(!Object.is(s,t))if(t=s,E>0)for(let l=0;l<n.length;l++)M.add(n[l]);else{let l=n.slice();for(let u=0;u<l.length;u++)l[u]()}return t},"getterSetter");return o.subs=n,o},"signal"),d=i(e=>{let t=new Set,n=!1,o=i(()=>{if(n)return;n=!0;let r=a;a=o;try{e()}finally{a=r,n=!1}},"reactive");return o.subs=t,o(),()=>{t.forEach(r=>{let s=r.subs.indexOf(o);s!==-1&&r.subs.splice(s,1)}),t.clear()}},"effect"),U=i(e=>{let t=h(e());return d(()=>t(e())),()=>t()},"computed"),G=i(e=>{E++;try{return e()}finally{if(E--,E===0){let t=Array.from(M);M.clear(),t.forEach(n=>n())}}},"batch");var ne=/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/;function oe(e){if(e==null)return"";if(e==="true")return!0;if(e==="false")return!1;if(ne.test(e))return Number(e);if(typeof e=="string"&&(e[0]==="{"||e[0]==="["))try{return JSON.parse(e)}catch{}return e}i(oe,"parseAttributeValue");function R(e){for(let t of e.attributes){let{name:n,value:o}=t;n.startsWith("on")||n.startsWith("ref")||(e.props[n]=h(oe(o)))}}i(R,"initializeProps");function S(e,t,n=null){let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n?.dispatchEvent(o),o}i(S,"emit");function $(e){e&&(e.emit=(t,n)=>S(t,n,e))}i($,"initDispatch");function p(e,{mark:t=!1,parent:n=null}={}){let o=document.createDocumentFragment();if(!e?.length)return o;for(let r of e)r&&(t&&(r._marker=!0),o.appendChild(Array.isArray(r)?p(r,{mark:t}):r));return n&&o.childNodes.length&&n.appendChild(o),o}i(p,"createFragment");function B(e){return Object.keys(e).reduce((t,n)=>e[n]?t+n+" ":t,"").trim()}i(B,"joinTruthy");var re=/^[a-z][a-z0-9]*-[a-z0-9-]*$/,ie=i((e,t={})=>{var n,o,r,D,T,u;return u=class extends HTMLElement{constructor(){super();b(this,r);b(this,n,this.attachShadow({mode:t.shadowMode||"open"}));b(this,o,!1);C(this,"props",Object.create(null));C(this,"_cleanup",[]);g(this,r,D).call(this),this.runHook("beforeMount")}connectedCallback(){g(this,r,T).call(this,!0)&&this.runHook("mount")}disconnectedCallback(){this.runHook("destroy"),this._cleanup.forEach(f=>f()),this._cleanup=[],g(this,r,T).call(this,!1)}},n=new WeakMap,o=new WeakMap,r=new WeakSet,D=i(function(){F(this),$(this),R(this);let f=e?.call(this,this.props),m=typeof f=="function"?f():f;p(m||[m],{parent:w(this,n)})},"#initializeComponent"),T=i(function(f){return w(this,o)===f?!1:(H(this,o,f),!0)},"#setMounted"),u},"BaseComponent"),se=i((e,t,n={})=>{typeof customElements<"u"&&re.test(e)&&!customElements.get(e)&&customElements.define(e,ie(t,n))},"component");var W=i(e=>e==null?"":String(e).replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[t]),"sanitizeHtml");function K(e,t){if(!t?.parentNode)return;let n=t.parentNode,o=t._marker||[];if(!e?.length){for(let c of o)c.nodes.forEach(f=>f?.parentNode?.removeChild(f));t._marker=[];return}let r=new Map(o.map(c=>[c.key,c])),s=e.map((c,f)=>(c=Array.isArray(c)?c.filter(Boolean):[c],{key:c.find(I=>I?.getAttribute?.("key"))?.getAttribute("key")||`__index_${f}`,nodes:c})),l=new Map(s.map(c=>[c.key,c]));for(let c of o)l.has(c.key)||c.nodes.forEach(f=>f?.parentNode?.removeChild(f));let u=t;for(let c of s){let f=r.get(c.key);f?(q(f.nodes,c.nodes,n),f.nodes[0]!==u.nextSibling&&n.insertBefore(p(f.nodes),u.nextSibling),c.nodes=f.nodes):n.insertBefore(p(c.nodes,{mark:!0}),u.nextSibling),u=c.nodes[c.nodes.length-1]||u}t._marker=s}i(K,"reconcile");function q(e,t,n){for(let o=0;o<Math.max(e.length,t.length);o++){let r=e[o],s=t[o];!r&&s?n.appendChild(s):r&&!s?(r._cleanup?.(),n.removeChild(r)):r&&s&&(r.nodeType!==s.nodeType||r.tagName!==s.tagName?n.replaceChild(s,r):r.nodeType===3?r.nodeValue!==s.nodeValue&&(r.nodeValue=s.nodeValue):r.nodeType===1&&(ce(r,s),q([...r.childNodes],[...s.childNodes],r)))}}i(q,"patchNodes");function ce(e,t){let n={},o=new Set;for(let{name:r,value:s}of e.attributes)n[r]=s;for(let{name:r,value:s}of t.attributes)n[r]!==s&&e.setAttribute(r,s),o.add(r);for(let r in n)o.has(r)||e.removeAttribute(r)}i(ce,"patchAttributes");var P=new WeakMap,y="\uFEFF",k=i((e,t,n)=>{if(t)if(e.removeAttribute(t),t==="ref")typeof n=="function"?n(e):n&&(n.current=e);else if(t[0]=="o"&&t[1]=="n"&&typeof n=="function"){let o=t.slice(2).toLowerCase();e.addEventListener(o,n),e._cleanup=()=>e.removeEventListener(o,n)}else t==="style"&&typeof n=="object"?d(()=>Object.assign(e.style,n)):d(()=>fe(e,t,typeof n=="function"?n():n));else ue(e,n)},"render");function fe(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null||n===void 0?e.removeAttribute(t):e.setAttribute(t,typeof n=="object"?B(n):n)}i(fe,"setAttribute");function le(e,t){let n=e.parentNode,o=e.nextSibling;for(;o&&o._marker;)o._cleanup?.(),n.removeChild(o),o=e.nextSibling;t?.length&&ae(p(t,{mark:!0}),n,e.nextSibling)}i(le,"replaceNodes");function ue(e,t){let n=i(o=>{if((o===!0||o===!1)&&(o=""),Array.isArray(o))K(o,e);else{let r=o==null?"":String(o),s=document.createTextNode(W(r));le(e,[s])}},"updateContent");typeof t=="function"?d(()=>n(t())):n(t)}i(ue,"setContent");function ae(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}i(ae,"insertFragment");function pe(e,t){let n=[],o=document.createTreeWalker(e.content,5);for(;o.nextNode();)n.push(o.currentNode);let r=0;for(let s=0;s<n.length;s++){let l=n[s];if(l.nodeType===1&&l.attributes.length)for(let u of Array.from(l.attributes))u.value===y&&k(l,u.name,t[r++]);else if(l.nodeType===3&&l.nodeValue.includes(y))if(l.nodeValue===y){let u=document.createComment("");l.parentNode.replaceChild(u,l),k(u,null,t[r++])}else{let u=A(l.nodeValue.replaceAll(y,"<!>")),c=Array.from(u.content.childNodes);for(let f=0;f<c.length;f++){let m=c[f];m.nodeType===8&&k(m,null,t[r++])}l.parentNode.replaceChild(u.content,l)}}}i(pe,"processTemplate");var A=i((e,t)=>{let n=document.createElement("template");return n.innerHTML=e,t?.as==="nodes"?[...n.content.childNodes]:n},"createNodes"),X=i((e,...t)=>{let n=P.get(e)||(P.set(e,e),e);if(!t.length)return n.length===1?A(n[0],{as:"nodes"}):A(n.join(""),{as:"nodes"});let o=A(n.join(y));return pe(o,t),[...o.content.childNodes]},"html");function de(e=null){let t=e;return n=>n!==void 0?t=n:t}i(de,"ref");export{G as batch,Q as beforeMount,Z as beforeUpdate,se as component,U as computed,d as effect,S as emit,X as html,ee as onDestroy,te as onEffect,Y as onMount,v as onUpdate,de as ref,h as signal};
//# sourceMappingURL=esor.min.js.map
